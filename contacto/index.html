<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Web oficial de Übicuom - Contacto" />
    <meta name="author" content="Ü86596426" />
    <meta
      name="keywords"
      content="Übicuom, entidad, conocimiento, expandirlo, contacto"
    />
    <meta property="og:title" content="Übicuom — Contacto" />
    <meta property="og:description" content="Web oficial de Übicuom." />
    <meta property="og:type" content="website" />
    <meta name="theme-color" content="#222222" />

    <link rel="stylesheet" href="../style.css" />

    <link rel="icon" href="../favicon.png" type="image/png" />

    <link
      rel="preload"
      href="../assets/fonts/roboto/roboto-variable.ttf"
      as="font"
      type="font/ttf"
      crossorigin
    />
    <link
      rel="preload"
      href="../assets/fonts/roboto-mono/roboto-mono-variable.ttf"
      as="font"
      type="font/ttf"
      crossorigin
    />

    <script src="../assets/js/theme-toggle.js" defer></script>
    <script src="../assets/js/nav-drawer.js" defer></script>

    <title>Übicuom — Contacto</title>
  </head>
  <body>
    <a class="skip-link" href="#main">Saltar al contenido</a>

    <header>
      <a href="../" class="logo">Übicuom</a>

      <div class="right">
        <nav id="nav" aria-label="Primary">
          <ul>
            <li>
              <a href="../#goals">Objetivos</a>
            </li>
            <li>
              <a href="../#articles">Artículos</a>
            </li>
            <li>
              <a href="https://ubicuom.freeflarum.com/" target="_blank">Foro</a>
            </li>
          </ul>
        </nav>

        <button
          id="burger"
          class="selector burger"
          aria-controls="nav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          ☰
        </button>
        <button
          id="theme-toggle"
          class="selector"
          type="button"
          aria-label="Switch to dark theme"
          aria-pressed="false"
        >
          <svg
            class="sun"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
            focusable="false"
          >
            <circle cx="12" cy="12" r="4" />
            <path
              d="M12 2v2M12 20v2M4 12H2M22 12h-2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M19.07 4.93l-1.41 1.41M6.34 17.66l-1.41 1.41"
            />
          </svg>
          <svg
            class="moon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
            focusable="false"
          >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
        </button>
      </div>
    </header>

    <main id="main">
      <section id="contact">
        <h2>Contacto:</h2>
        <form id="contact-form" class="contact-form" method="POST">
          <input
            type="hidden"
            name="access_key"
            value="387d0ef3-976a-4a69-ab64-723518e37095"
          />

          <label for="name">Nombre</label>
          <input type="text" id="name" name="name" required />

          <label for="email">Email</label>
          <input type="email" id="email" name="email" required />

          <label for="message">Mensaje</label>
          <textarea id="message" name="message" rows="5" required></textarea>

          <button
            type="submit"
            class="btn primary"
            aria-label="Send contact email"
          >
            Enviar
          </button>

          <p id="form-result" aria-live="polite"></p>
        </form>
      </section>
    </main>

    <footer>
      <p>© 2024-2025 Übicuom</p>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("contact-form");
        const result = document.getElementById("form-result");

        form.addEventListener("submit", async (event) => {
          event.preventDefault(); // evita que recargue/navegue
          result.style.display = "block";
          result.textContent = "Enviando...";

          const formData = new FormData(form);
          const object = Object.fromEntries(formData.entries());
          const json = JSON.stringify(object);

          try {
            const response = await fetch("https://api.web3forms.com/submit", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                Accept: "application/json",
              },
              body: json,
            });

            const data = await response.json();

            if (response.ok) {
              result.textContent = "Mensaje enviado correctamente. ¡Gracias!";
              form.reset(); // aquí se limpia el formulario
            } else {
              console.error(response);
              result.textContent =
                data.message ||
                "Ha habido un problema al enviar el formulario.";
            }
          } catch (error) {
            console.error(error);
            result.textContent =
              "Error de conexión. Inténtalo de nuevo más tarde.";
          }
        });
      });
    </script>
  </body>
</html>
